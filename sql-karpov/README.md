# SQL симулятор.
## Уроки

- Модуль 1

    3. [Базовые запросы SQL](./1_3.md)
    4. [Фильтрация данных](./1_4.md)
    5. [Агрегация данных](./1_5.md)
    6. [Группировка данных](./1_6.md)
    7. [Подзапросы](./1_7.md)
    8. [JOIN - основные типы объединений](./1_8.md)
    10. [Оконные функции](./1_10.md)
    
- Модуль 2

    1. [Решаем продуктовые задачи](./2_1.md)
    2. [Анализ продуктовых метрик. Экономика продукта](./2_2.md)
    3. [Анализ продуктовых метрик. Маркетинговые метрики.](./2_2.md#анализ-продуктовых-метрик-маркетинговые-метрики)



## Поядок написания операторов в запросе

    SELECT     -- перечисление полей результирующей таблицы
    FROM       -- указание источника данных
    JOIN       -- объединение источника с другой таблицей
    WHERE      -- фильтрация данных
    GROUP BY   -- группировка данных
    HAVING     -- фильтрация данных после группировки
    ORDER BY   -- сортировка результирующей таблицы
    LIMIT      -- ограничение количества выводимых записей

## Последовательность выполения запросов

    FROM       -- указание источника данных
    WHERE      -- фильтрация данных
    GROUP BY   -- группировка данных
    HAVING     -- фильтрация данных после группировки
    SELECT     -- перечисление полей результирующей таблицы
    ORDER BY   -- сортировка результирующей таблицы
    LIMIT      -- ограничение количества выводимых записей

## Заметки
UNNEST - предназначена для разворачивания массивов и превращения их в набор строк

    SELECT 'row', unnest(ARRAY['one','two','three'])
    
    Результат:
    row    one
    row    two
    row    three

EXTRACT - извлекает год, месяц, день, секунды и т.д.

    SELECT EXTRACT(epoch FROM INTERVAL '3 days, 1:21:32')
    
    Результат:
    264092

ARRAY_AGG - продвинутая агрегирующая функция, которая собирает все значения в указанном столбце в единый список (ARRAY). По сути array_agg — это операция, обратная unnest

    SELECT column_1, array_agg(column_2) AS new_array
    FROM table
    GROUP BY column_1

STRING_TO_ARRAY() - разделяет строку на элементы массива, можно передать разделитель, [пример](./1_8.md#задание-20)

JOIN - для большего погружения в джойны рекомендуем следующие статьи на Хабре: [первая](https://habr.com/ru/post/448072/) и [вторая](https://habr.com/ru/post/450528/).

В PostgreSQL оконные функции в качестве результата возвращают значение типа DECIMAL несмотря на то, что исходное значение находится в формате INTEGER
